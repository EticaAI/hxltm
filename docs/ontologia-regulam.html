<!doctype html>
<html class="no-js" lang="la">

<head>
  <meta charset="utf-8">
  <title>Regula testum</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
</head>

<body>
  <p>Regula testum. Ad console.log</p>
  <script>
    const debug = true
    const hxltm_ontologia_archivum = "./ontologia/cor.hxltm.215.json"

    const quod_exemplum = (ontologia) => {
      let resultatum = ontologia.ontologia_regulam.__exemplum
      // Ad hoc exemplum
      resultatum.push(
        { hxl: '#item+linguam' }
        // { hxl: '#item+linguam', classem: 'xpto' }
      )
      return resultatum
    }

    const actionem_testum = (exemplum, regula) => {
      debug && console.log('actionem_testum', regula)
      const regula_regex = new RegExp(regula, "i");
      let errorem = []
      exemplum.forEach(element => {
        debug && console.log('exemplum element', element)
        result = regula_regex.exec(element.hxl)
        // console.log('regex_basim6 v2', element, result.groups)
        // element.forEach(el2 => {
        //   console.log(el2)
        // })
        // If exemplum defined values, check if are equal
        Object.entries(element).forEach(([key, value]) => {
          if (result.groups[key]) {
            // console.log('compare', element[key], result.groups[key])
            if (element[key] !== result.groups[key]) {
              console.error(`[key !=] ${key} ; ${element[key]} ; ${result.groups[key]}`)
            }
          }
          // console.log(`${key}: ${value}`)
        });
      });
      if (errorem.length > 0) {
        console.error(errorem)
      } else {
        console.info('Okay!')
      }
    }

    const main = (ontologia) => {
      const regulam = ontologia.ontologia_regulam.__exemplum
      // rem = testum_rem(ontologia)
      const rem2 = quod_exemplum(ontologia)

      // regex_basim5 = new RegExp("^\#(?<divisionem>(item|meta)).+?(?<classem>(conceptum|linguam|terminum))", "i");
      // // regex_basim5 = new RegExp("^\#(?<divisionem>(item|meta)).{1}?(?<classem>(conceptum|linguam|terminum))", "i");
      // // regex_basim5 = new RegExp("^\#(?<divisionem>(item|meta)).{1}?(?<classem>(conceptum|linguam|terminum)).{1}?.*", "i");
      // rem.forEach(element => {
      //   result = regex_basim5.exec(element) || { groups: {} }
      //   console.log('regex_basim5', element, result.groups)
      // });
      // console.log('')
      // console.log('')
      regex_basim6 = new RegExp("^\#(?<divisionem>(item|meta)).+?(?<classem>(conceptum|linguam|terminum))(?<speciem>.*)", "i");
      // // regex_basim5 = new RegExp("^\#(?<divisionem>(item|meta)).{1}?(?<classem>(conceptum|linguam|terminum))", "i");
      // // regex_basim5 = new RegExp("^\#(?<divisionem>(item|meta)).{1}?(?<classem>(conceptum|linguam|terminum)).{1}?.*", "i");
      // rem.forEach(element => {
      //   result = regex_basim6.exec(element) || { groups: {} }
      //   console.log('regex_basim6', element, result.groups)
      // });
      // console.log('')
      // console.log('')

      rem2.forEach(element => {
        result = regex_basim6.exec(element.hxl) || { groups: {} }
        console.log('regex_basim6 v2', element, result.groups)
        // element.forEach(el2 => {
        //   console.log(el2)
        // })
        // If exemplum defined values, check if are equal
        Object.entries(element).forEach(([key, value]) => {
          if (result.groups[key]) {
            // console.log('compare', element[key], result.groups[key])
            if (element[key] !== result.groups[key]) {
              console.error(`[key !=] ${key} ; ${element[key]} ; ${result.groups[key]}`)
            }
          }
          // console.log(`${key}: ${value}`)
        });
      });

      actionem_testum(quod_exemplum(ontologia), ontologia.ontologia_regulam._basim.javascript)

    }

    fetch(hxltm_ontologia_archivum)
      .then(response => {
        return response.json();
      })
      // .then(jsondata => console.log(jsondata));
      .then(jsondata => main(jsondata));

  </script>
</body>

</html>
