<!--
Dominium Publicum
SPDX-License-Identifier: Unlicense
-->
<!doctype html>
<html lang="la">

<head>
  <meta charset="utf-8">
  <title>cōdex simplex ontologiae</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.7.2/font/bootstrap-icons.min.css"
    integrity="sha512-1fPmaHba3v4A7PaUsComSM4TBsrrRGs+/fv0vrzafQ+Rw+siILTiJa0NtFfvGeyY5E182SDTaF5PqP+XOHgJag=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/theme/dracula.min.css" integrity="sha512-gFMl3u9d0xt3WR8ZeW05MWm3yZ+ZfgsBVXLSOiFz2xeVrZ8Neg0+V1kkRIo9LikyA/T9HuS91kDfc2XWse0K0A==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/codemirror.min.css"
    integrity="sha512-CCnciBUnVXwa6IQT9q8EmGcarNit9GdKI5nJnj56B1iu0LuD13Qn/GZ+IUkrZROZaBdutN718NK6mIXdUjZGqg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/theme/dracula.min.css"
    integrity="sha512-gFMl3u9d0xt3WR8ZeW05MWm3yZ+ZfgsBVXLSOiFz2xeVrZ8Neg0+V1kkRIo9LikyA/T9HuS91kDfc2XWse0K0A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    /* https://codemirror.net/demo/resize.html */
    .testum .CodeMirror {
      border: 1px solid #eee;
      height: auto;
    }

    body {
      padding-bottom: 4em;
    }
  </style>
</head>
<!--
  @see
  - https://github.com/HXL-CPLP/forum/issues/60
  - https://github.com/SEMICeu/Core-Person-Vocabulary/issues/39

-->

<body>
  <main class="container">
    <h1>Cōdex simplex ontologiae</h1>
    <p><small><a href="https://developer.chrome.com/docs/devtools/console/log/"> console.log de web pasco</a> aperire,
        quaeso! <kbd>Control+Shift+J</kbd> aut <kbd>Command+Option+J</kbd>.</small>
    </p>
    <section class="ontologia">
      <h2 id="h-ontologia"><a href="#h-ontologia">§</a> 1. Ontologia</h2>
      <textarea id="ontologia" class="c-ontologia" style="width:100%;min-height: 10em;"># https://semiceu.github.io/Core-Person-Vocabulary/releases/2.00/
'12':
  eng-Latn:
    '0': Person
  prs-Arab:
    '0': "//شخص//"
  qhx-Latn:
    '0': "#item+personam"
'14':
  eng-Latn:
    '0': Legal Entity
  prs-Arab:
    '0': "//نهاد قانونی//"
'12.10':
  eng-Latn:
    '0': Person - //Any type of person name//
  prs-Arab:
    '0': "//شخص// - //هر نوع نام شخصی//"
  qhx-Latn:
    '0': "#item+personam+nomen+co_12_10"
'12.10.34':
  eng-Latn:
    '0': Person - alternative name
  prs-Arab:
    '0': "//شخص// - //نام جایگزین//"
  qhx-Latn:
    '0': "#item+personam+nomen+co_12_10_34"
'12.10.34.5.99':
  eng-Latn:
    '0': Person - nickname from workplace
  prs-Arab:
    '0': "//شخص// - //نام مستعار از محل کار//"
'14.56':
  eng-Latn:
    '0': Legal Entity - alternative name
  prs-Arab:
    '0': "//نهاد قانونی// - //نام جایگزین//"

### '45'?
# On 25 April 1945, 50 governments met... 24 October 1945
'45':
  qaa-Zyyy:
    '0': 'https://www.wikidata.org/wiki/Q1065'
'45.11':
  qaa-Zyyy:
    '0': 'https://icd.who.int/ct11'
'45.49':
  qaa-Zyyy:
    '0': 'https://unstats.un.org/unsd/methodology/m49/'
    '1': 'https://unstats.un.org/unsd/publication/SeriesM/Series_M49_(1970)_en-fr.pdf'

### '47'?
# Founded on 23 February 1947 ...
# ...ZZZ standards are not available free of charge, but for a purchase fee,
# which has been seen by some as unaffordable by small open source projects.[38]
'47':
  qaa-Zyyy:
    '0': 'https://www.wikidata.org/wiki/Q15028'
'47.639':
  qaa-Zyyy:
    '0': 'https://www.wikidata.org/wiki/Q33547'
'47.639.3':
  qaa-Zyyy:
    '0': 'https://www.wikidata.org/wiki/Q845956'
'47.15924':
  qaa-Zyyy:
    '0': 'https://www.wikidata.org/wiki/Q845956'
    '1': 'https://unicode.org/iso15924/iso15924.txt'
'47.15924.160':
  qaa-Zyyy:
    '0': 'Arab'
'47.15924.215':
  qaa-Zyyy:
    '0': 'Latn'
      </textarea>
      <div class="btn-group float-end" role="group" aria-label="Toolbar Ontologia">
        <button type="button" class="btn btn-outline-success btn-sm" id="ontologia-archivum-yml">
          <i class="bi bi-file-earmark-arrow-down"></i>
          ontologia.yml
        </button>
        <button type="button" class="btn btn-outline-secondary btn-sm" id="ontologia-archivum-json">
          <i class="bi bi-file-earmark-arrow-down"></i>
          ontologia.json
        </button>
      </div>
    </section>
    <section class="professorem">
      <h2 id="h-professorem"><a href="#h-professorem">§</a> 2. Professōrem</h2>
      <p><mark>Ad como opus</mark></p>
    </section>
    <!--
    <h2>Professōrem</h2>
    <textarea id="professorem" style="width:100%;height: auto;">
  UNMigration/HTCDS,eng-Latn-x-exemplum,Case Owner,[12.10.23] First Name,[12.10.45] Second Name,Type of Exploitation
  INTERPOL/ante-mortem,eng-Latn-x-exemplum,AM No:,[12.10.23] First name(s):,[12.10.23] Family name:,Date of birth:,Nature of disaster:
    </textarea>
  -->
    <section class="testum">
      <h2 id="h-testum"><a href="#h-testum">§</a> 3. Usum exemplis</h2>
      <textarea id="testum">Testum/1,mul-Zmth-x-testum,12.10.34,12.10.34~2,14.56,14.56,14.56~2
Testum/2,mul-Latn-x-testum,Attacker name [12.10.34~1],Survivor name [12.10.34~2],Company name [14.56~2]
Testum/3,mul-Latn-x-testum,alternative-name--12-10-34,altrrnative-nane_12-10-34
Testum/4,prs-Arab-x-testum,"//نام مهاجم// [12.10.34~1]","//نام بازمانده// [12.10.34~2]","//نام شرکت// [14.56~2]"
Testum/555,mul-Zmth-x-testum,12.10.34,12.10.34~2,14.56,14.56,14.56~2</textarea>
      <div class="btn-group float-end" role="group" aria-label="Download testum">
        <button type="button" class="btn btn-outline-success btn-sm" id="testum-archivum-csv">
          <i class="bi bi-file-earmark-arrow-down"></i>
          testum.csv
        </button>
      </div>
      <section class="ast">
        <h3 id="h-ast"><a href="#h-ast">§</a> 3.1. AST de usum exemplis</h3>
        <section>
          <h4 id="h-ast-dot">
            <a href="#h-ast-dot">§</a> 3.1.1. AST in DOT
            <a target="_blank" href="http://www.graphviz.org/doc/info/lang.html"><i class="bi bi-info-circle"></i></a>
            <a target="_blank" href="http://www.graphviz.org/theory/"><i class="bi bi-info-circle"></i></a>
          </h4>
          <textarea id="testum_dot" style="width:100%; min-height: 5em; height: auto;"># requīrātur: āctiōnem</textarea>
          <div class="btn-group float-end" role="group" aria-label="Toolbar AST DOT">
            <button type="button" class="btn btn-outline-success btn-sm float-end" id="testum-ast-archivum-dot">
              <i class="bi bi-file-earmark-arrow-down"></i>
              testum-ast.gv
            </button>
            <a target="_blank" href="#" class="btn btn-success btn-sm float-end" id="testum-ast-online-dot">
              <i class="bi bi-globe"></i>
              GraphvizOnline
            </a>
          </div>
        </section>
      </section>
    </section>
    <section class="todo">
      <hr>
      <h2><mark>Ad como opus</mark></h2>
      <ul>
        <!-- http://www.graphviz.org/doc/info/lang.html -->
        <li>http://viz-js.com/
          <!-- http://www.graphviz.org/doc/info/lang.html -->
        </li>
        <li>https://github.com/dagrejs/dagre/wiki</li>
        <li>http://webgraphviz.com/</li>
        <!-- _[eng-Latn] this one accept show via URL [eng-Latn]_  -->
        <li>http://graphviz.it/#/gallery/nhg.gv</li>
        <li>https://dreampuf.github.io/GraphvizOnline/</li>
        <li>https://github.com/magjac/d3-graphviz</li>
      </ul>
    </section>
  </main>
  <div class="fixed-bottom" style="background-color: darkgray;">
    <div class="container">
      <div class="btn-toolbar" role="toolbar" aria-label="Toolbar" style="padding: 5px">
        <form>
          <input type="text" id="objectivum_linguam" placeholder="objectivum_linguam" value="eng-Latn" />
          <input type="text" id="agendum_linguam" placeholder="agendum_linguam" value="prs-Arab,qhx-Latn">
          <button type="button" class="btn btn-primary actionem" id="actionem">āctiōnem</button>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"
    integrity="sha512-CSBhVREyzHAjAFfBlIBakjoRUKp5h7VSweP0InR/pAJyptH7peuhCsqAI/snV+TwZmXZqoUklpXp6R6wMnYf5Q=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    /****** _[eng-Latn] Edit this section [eng-Latn]_ ******/
    const debug = false
    let datum_globum = {}
    let testum = {}
    /****** _[eng-Latn] Edit this section [eng-Latn]_ ******/
    // const yaml = require('js-yaml');

    /**
     * _[eng-Latn] Generate an fully numeric abstract syntax tree [eng-Latn]_
     *
     * @param {array} rem_collectionem - Array JavaScriptae de perfectum Rem aut vacuum
     * @returns {array}
     **/
    function abstractum_syntaxim_arborem(rem_collectionem) {
      let ast = []
      let rem_crudum = []
      let coniunctum = new Set()
      let coniunctum_incognitum = []
      let indicem = 1

      rem_collectionem.forEach(element => {
        if (element) {
          let _rem = quod_significationem_de_codicem_purum(element, indicem)
          rem_crudum.push(_rem)
          coniunctum.add(_rem[3])
        } else {
          coniunctum_incognitum.push(indicem)
        }
        indicem = indicem + 1
      });

      if (coniunctum_incognitum.length > 0) {
        ast.push([-1, coniunctum_incognitum])
      }
      if (coniunctum.size) {
        coniunctum.forEach(coniunctum_numerum => {
          ast.push([coniunctum_numerum, ast_coniunctum(rem_crudum, coniunctum_numerum)])
        });
      }

      return ast
    }

    function abstractum_syntaxim_arborem_v2(rem_collectionem) {
      let ast = []
      let rem_crudum = []
      let coniunctum = new Set()
      let coniunctum_incognitum = []
      let indicem = 1

      // Tests
      // abstractum_syntaxim_arborem(['12.10.34', '12.10.34~2', '', '14.56', '14.56', '14.56~2'])
      // abstractum_syntaxim_arborem(['Attacker name [12.10.34~1]', 'Survivor name [12.10.34~2]', 'Something else', 'Company name [14.56~2]'])

      // [
      //   [ <cluster_-1>, [
      //       [<original_index>, <original_caput>, <aliud>, <codicem_completum>, <codicem_cor>, <fontem> ]
      //       [<original_index>, <cluster_index>, <typum_rem>, <codicem>, <aliud>, <fontem>]
      //   ],
      //   [ <cluster_0>, [
      //
      //   ],
      //   [ <cluster_0>, [
      //
      //   ]
      // ]

      rem_collectionem.forEach(element => {
        if (element) {
          let _rem0 = quod_significationem_de_textum(element)
          if (_rem0[0] > 0) {
            let _rem = quod_significationem_de_codicem_purum(_rem0[1], indicem)
            // let _rem = quod_significationem_de_codicem_purum(element, indicem)
            rem_crudum.push(_rem)
            coniunctum.add(_rem[3])
          } else {
            coniunctum_incognitum.push(indicem)
          }
          // console.log(_rem, _rem0)
        } else {
          coniunctum_incognitum.push(indicem)
        }
        indicem = indicem + 1
      });

      if (coniunctum_incognitum.length > 0) {
        ast.push([-1, coniunctum_incognitum])
      }
      if (coniunctum.size) {
        coniunctum.forEach(coniunctum_numerum => {
          ast.push([coniunctum_numerum, ast_coniunctum(rem_crudum, coniunctum_numerum)])
        });
      }

      return ast
    }

    /**
     * _[eng-Latn] Return subset of variables from it's cluster number [eng-Latn]_
     *
     * @param {array}  rem_completum
     * @param {number} coniunctum
     * @returns {array}
     **/
    function ast_coniunctum(rem_completum, coniunctum) {
      let resultatum = []
      rem_completum.forEach(element => {
        if (element[3] === coniunctum) {
          resultatum.push(element)
        }
      });
      if (resultatum.length === 0) {
        throw `ast_coniunctum non? coniunctum[${coniunctum}] rem_completum [${JSON.stringify(rem_completum)}] `;
      }
      return resultatum
    }

    /**
     * _[eng-Latn] A rudimentar summary of Abstract Syntax Tree. Consider use
     * the ast_in_dot_numerae()
     * [eng-Latn]_
     *
     * @param {array}  ast
     * @returns {object}
     **/
    function ast_in_summarium(ast) {
      let resultatum = {}

      // ast_in_summarium(abstractum_syntaxim_arborem(['12.10.34', '12.10.34~2', '', '14.56', '14.56', '14.56~2']))
      if (ast && ast.length) {
        ast.forEach(coniunctum_et_rem_collectionem => {
          let coniunctum = "" + coniunctum_et_rem_collectionem[0]
          // console.log(coniunctum)
          resultatum[coniunctum] = []
          coniunctum_et_rem_collectionem[1].forEach(rem_collectionem => {
            // console.log('rem_collectionem', rem_collectionem)
            if (Array.isArray(rem_collectionem)) {
              resultatum[coniunctum].push("" + rem_collectionem[0] + ',' + rem_collectionem[1])
            } else {
              resultatum[coniunctum].push('' + rem_collectionem)
            }
          });
        });
      }

      return resultatum
    }

    // document.querySelector('#testum_dot').value = ast_in_dot_numerae(abstractum_syntaxim_arborem(['12.10.34', '12.10.34~2', '', '14.56', '14.56', '14.56~2'])
    // ast_in_dot_numerae(abstractum_syntaxim_arborem(['12.10.34', '12.10.34~2', '', '14.56', '14.56', '14.56~2']))
    // summārium, https://en.wiktionary.org/wiki/summarium
    function ast_in_dot_numerae(ast, titulum) {
      let resultatum = []
      const sumarium = ast_in_summarium(ast)
      // return sumarium

      resultatum.push(`digraph "${titulum}" {`)
      Object.entries(sumarium).forEach(([clavem, rem_simplex]) => {
        console.log(`${clavem} ${rem_simplex}`); // "a 5", "b 7", "c 9"
        // let rem_simplex_q = rem_simplex.reduce(function (acc, val) {
        //   return acc + ` "${val}"`
        // })
        let rem_simplex_q = rem_simplex.map(function (item) {
          return `"${item}"`
        }).join(" ");
        // rem_simplex.forEach(it => {
        //   rem_simplex_q
        // });
        resultatum.push(`  subgraph "cluster_${clavem}" {${rem_simplex_q}}`)
      });
      // resultatum.push('A -> {B C}')
      resultatum.push('}')
      return resultatum.join("\n")
    }

    /**
     * Trivia:
     * - atomum, https://en.wiktionary.org/wiki/atomus#Latin
     * @param {string} rem_crudum
     * @returns {[array|null]}
     */
    const atomum = (rem_crudum) => {
      let resultatum = []

      resultatum = quod_codicem(rem_crudum)
      // console.log('atomum', rem_crudum, resultatum)
      if (resultatum && resultatum[0]) {
        return resultatum
      }
      return null
    }

    /**
     * Trivia:
     * - coniūnctum, https://en.wiktionary.org/wiki/coniunctus#Latin
     *
     * @param {string} [rem_crudum]
     * @param {number} [indicem]
     * @returns {object}
     **/
    const abstractum_syntaxim_arborem_coniunctum = (rem_crudum, indicem) => {

    }

    /**
     * Trivia:
     * - significātiōnem, https://en.wiktionary.org/wiki/significatio#Latin
     * - pūrum, https://en.wiktionary.org/wiki/purus#Latin
     * - abstractum, https://en.wiktionary.org/wiki/purus#Latin
     *
     * @example
     * // returns [3, '12.34~3', '12.34', 3]
     * quod_significationem_de_codicem_purum('12.34~2', 3)
     *
     * @example
     * // returns [3, '12.34~3', '12.34', 3]
     * quod_significationem_de_codicem_purum('12.34', 4)
     *
     * @example
     * // returns [3, '12.34.56~3', '12.34.56', 3, ['12', '12.34']]
     * quod_significationem_de_codicem_purum('12', -1, true)
     *
     * @param {string} [codicem_purum]
     * @param {number} indicem
     * @param {bool} [abstractum]
     * @returns {array}
     */
    const quod_significationem_de_codicem_purum = (codicem_purum, indicem, abstractum) => {
      // coniunctum = 0: De anglicum "Broadcast address"
      // @see https://en.wikipedia.org/wiki/Broadcast_address
      let coniunctum = 0
      let codicem_completum = codicem_purum
      let codicem_radicem = ''
      let patrem = []

      if (!codicem_purum) {
        throw "codicem_purum?";
      }

      if (codicem_purum.length < 5 && !abstractum) {
        throw `codicem_purum > [00.00]? [${codicem_purum}]`;
      }
      // @TODO: check if starts and ends with digit

      if (codicem_purum.indexOf("~") > -1) {
        let temp = codicem_purum.split("~")
        codicem_radicem = temp[0]
        coniunctum = parseInt(temp[1])
      } else {
        codicem_radicem = codicem_purum
      }
      let temp_parts = codicem_radicem.split('.')
      if (temp_parts.length > 1) {
        // let temp_patrem = codicem_radicem.split('.')
        do {
          // console.log('oi', temp_parts)
          temp_parts.pop();
          patrem.push(temp_parts.join('.'))
        } while (temp_parts.length > 0);

        patrem = patrem.filter(col => col != "").reverse()
      }

      return [indicem, codicem_completum, codicem_radicem, coniunctum, patrem]
    }

    /**
     * Trivia:
     * - significātiōnem, https://en.wiktionary.org/wiki/significatio#Latin
     * - cōdicem, https://en.wiktionary.org/wiki/codex#Latin
     * - aliud, https://en.wiktionary.org/wiki/alius#Latin
     * - typum, https://en.wiktionary.org/wiki/typus#Latin
     * - fontem, https://en.wiktionary.org/wiki/fons#Latin
     *
     * @example <caption>00.00~0</caption>
     * // returns [1, '12.34~5', '', '12.34~5']
     * quod_significationem_de_textum('12.34~5')
     *
     * @example <caption>[00.00~0]</caption>
     * // returns [2, '12.34~5', '', '[12.34~5]
     * quod_significationem_de_textum('[12.34~5]')
     *
     * @example <caption>[00.00~0] 00=(...); []=(...);</caption>
     * // returns [2, '12.34~5', '', '﹇١٢.٣٤~٥﹈']
     * quod_significationem_de_textum('﹇١٢.٣٤~٥﹈')
     *
     * @example
     * // returns [3, '12.34', '//نام جایگزین//', '[12.34] //نام جایگزین//']
     * quod_significationem_de_textum('[12.34] //نام جایگزین//')
     *
     * @example
     * // returns @TODO
     * quod_significationem_de_textum('alternative-name--12-34')
     *
     * @example
     * // returns @TODO
     * quod_significationem_de_textum('备用名称_12-34')
     *
     * @param {string} [textum]
     * @returns {array}
     */
    const quod_significationem_de_textum = (textum) => {
      let typum = -1 // -1: non-codicem; 1: numerum purum; 2 [00.00];
      let codicem = ''
      let aliud = ''
      let fontem = textum

      // Full test
      // ['12.34~5', '١٢.٣٥', '[12.34~5]', '[12.34~5] lorem ipsum', ' Lorem Ipsum [12.34~5]', '[١٢.٣٥] لوريم إيبسوم', 'lorem-ipsum_12-34', 'lorem-ipsum--12-34'].map(quod_significationem_de_textum)

      // @see https://www.unicode.org/reports/tr44/#General_Category_Values
      // Regula cor: 00.00~0
      const RegulaCodicemPurum = `(\\p{General_Category=Decimal_Number}[\\p{General_Category=Decimal_Number}|\.|~]*\\p{General_Category=Decimal_Number})`
      // Regula cor: [00.00~0]
      const RegulaCodicemInVasum = `(\\p{General_Category=Open_Punctuation}${RegulaCodicemPurum}\\p{General_Category=Close_Punctuation})`

      // Regula de factum: /^00.00~0$/
      const __RegulaCodicemPurum = new RegExp('^' + RegulaCodicemPurum + '$', 'u')
      // Regula de factum: /^[00.00~0]$/
      const __RegulaCodicemPurumInVasum = new RegExp('^' + RegulaCodicemInVasum + '$', 'u')
      // Regula de factum: /^[00.00~0] aliud $/
      const __RegulaCodicemPurumInVasumInitiale = new RegExp('^' + RegulaCodicemInVasum + '(.+)$', 'u')
      // Regula de factum: /^ aliud [00.00~0]$/
      const __RegulaCodicemPurumInVasumFinale = new RegExp('^(.+)' + RegulaCodicemInVasum + '$', 'u')

      // Punctuation, connector, 	Includes "_" underscore
      // https://www.compart.com/en/unicode/category/Pc
      //
      // Punctuation, dash, 	Includes "-" dash
      // https://www.compart.com/en/unicode/category/Pd
      //
      // Punctuation, open [, {, ﹇
      // https://www.compart.com/en/unicode/category/Ps
      //
      // Punctuation, close ], }, ﹈
      // https://www.compart.com/en/unicode/category/Pe
      //
      // Punctuation, other . , * ! ?
      // https://www.compart.com/en/unicode/category/Po
      // 
      // Math Symbol

      if (__RegulaCodicemPurum.test(textum)) {
        typum = 1
        codicem = quod_significationem_in_digitum(textum.match(__RegulaCodicemPurum)[0])
        // resultatum.push(textum.match(RegulaCodicemPurum))

      } else if (__RegulaCodicemPurumInVasum.test(textum)) {
        let temp = textum.match(__RegulaCodicemPurumInVasum)
        typum = 2
        codicem = quod_significationem_in_digitum(temp[2])

      } else if (__RegulaCodicemPurumInVasumInitiale.test(textum)) {
        let temp = textum.match(__RegulaCodicemPurumInVasumInitiale)
        typum = 3
        codicem = quod_significationem_in_digitum(temp[2])
        aliud = temp[3].trim()

      } else if (__RegulaCodicemPurumInVasumFinale.test(textum)) {
        let temp = textum.match(__RegulaCodicemPurumInVasumFinale)
        typum = 4
        codicem = quod_significationem_in_digitum(temp[3])
        aliud = temp[1].trim()

      } else {
        // @TODO: implement parsing pattterns like these
        //        - alternative-name--12-34
        //        - altrrnative-nane_12-34
        //        - 备用名称--12-34
        //        - மாற்று பெயர்--12-34
      }

      return [typum, codicem, aliud, fontem]
    }

    // quod_significationem_in_digitum('١٢.٣٥')
    /**
     * @see This comment https://github.com/HXL-CPLP/forum/issues/60#issuecomment-997185201
     */
    function quod_significationem_in_digitum(codicem_purum, in_indicem = 0) {
      if (!codicem_purum || codicem_purum.length === 0) {
        return ''
      }
      let resultatum = ''
      for (const [index, rem] of codicem_purum.split('').entries()) {
        resultatum = resultatum + quod_significationem_in_digitum_de_atomum(rem)
      }
      return resultatum
    }

    // quod_significationem_in_digitum_de_atomum('١')
    /**
     */
    function quod_significationem_in_digitum_de_atomum(atom) {
      const datum = [
        '0123456789', // DIGIT ZERO (...) DIGIT NINE
        '٠١٢٣٤٥٦٧٨٩', // 	ARABIC-INDIC DIGIT ZERO (...) ARABIC-INDIC DIGIT NINE
        '߀߁߂߃߄߅߆߇߈߉', // 	U+07C0	NKO DIGIT ZERO (...) U+07C9	NKO DIGIT NINE
        '०१२३४५६७८९', // U+0966	DEVANAGARI DIGIT ZERO (...) U+096F	DEVANAGARI DIGIT NINE
        // @TODO: This function is obviously partial. Eventually It needs a better alternative.
        //        See this comment
        //        https://github.com/HXL-CPLP/forum/issues/60#issuecomment-997185201
      ]
      // https://www.fileformat.info/info/unicode/category/Nd/list.htm

      for (let NumerumSystema of datum) {
        // console.log('NumerumSystema', NumerumSystema)
        for (const [index, rem] of NumerumSystema.split('').entries()) {
          if (atom === rem) {
            return index
          }
        }
      }
      // _[eng-Latn]Worst case: we return the item, without changes[eng-Latn]_
      return atom
    }

    /**
     * _[eng-Latn]
     * (Debug) what does this text means into Unicode General Category Property
     * (using JavaScript Engine) regexes?
     * [eng-Latn]_
     *
     * @see https://www.unicode.org/reports/tr44/#General_Category_Values
     * @see https://unicode.org/reports/tr18/#General_Category_Property
     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes
     *
     * @example
     * ['12.34~5', '١٢.٣٥', '[12.34~5]', '[12.34~5] lorem ipsum', ' Lorem Ipsum [12.34~5]', '[١٢.٣٥] لوريم إيبسوم', 'lorem-ipsum_12-34', 'lorem-ipsum--12-34'].map(quod_significationem_in_regula)
     *
     * @param {string} textum
     * @returns {array}
     */
    function quod_significationem_in_regula(textum) {
      let resultatum = []
      const RegulaSystemaScribo = /\p{General_Category=Letter}/gu
      const RegulaNumerum = /\p{General_Category=Number}/gu
      const RegulaNumerumDigitum = /\p{General_Category=Decimal_Number}/gu
      const RegulaPunctumInitiale = /\p{General_Category=Open_Punctuation}/gu
      const RegulaPunctumFinale = /\p{General_Category=Close_Punctuation}/gu
      const RegulaSublineam = /\p{General_Category=Connector_Punctuation}/gu
      // @TODO: Non-latinum terminum? https://en.wiktionary.org/wiki/hyphen
      const RegulaHuphen = /\p{General_Category=Dash_Punctuation}/gu
      const RegulaExtrapunctum = /\p{General_Category=Other_Punctuation}/gu
      const RegulaSymbolum = /\p{General_Category=Symbol}/gu
      const RegulaMathematicam = /\p{General_Category=Math_Symbol}/gu

      // // FULL STOP U+002E https://www.compart.com/en/unicode/U+002E
      // const SignificationemSeparatum = '.'
      // // TILDE (U+007E) https://www.compart.com/en/unicode/charsets/containing/U+007E
      // const SignificationemConiunctum = '~'

      // Strict regex
      // const RegulaCodicemPurum = /^(\p{General_Category=Decimal_Number}[\p{General_Category=Decimal_Number}|\.|~]*\p{General_Category=Decimal_Number})$/u
      // const oi = /^(p{General_Category=Decimal_Number}[p{General_Category=Decimal_Number}|.|~]*p{General_Category=Decimal_Number})$/
      // const oi = /^(\p{General_Category=Decimal_Number}[\p{General_Category=Decimal_Number}|\.|~]*\p{General_Category=Decimal_Number})$/
      const RegulaCodicemPurum = `(\\p{General_Category=Decimal_Number}[\\p{General_Category=Decimal_Number}|\.|~]*\\p{General_Category=Decimal_Number})`
      const RegulaCodicemInVasum = `(\\p{General_Category=Open_Punctuation}${RegulaCodicemPurum}\\p{General_Category=Close_Punctuation})`
      // const RegulaCodicemInVasum = /^(\p{General_Category=Decimal_Number}[\p{General_Category=Decimal_Number}|\.|~]*\p{General_Category=Decimal_Number})$/u

      const RegulaInitiale = /^\p{General_Category=Open_Punctuation}(.*)\p{General_Category=Close_Punctuation}.?/u
      const RegulaFinale = /.?\p{General_Category=Open_Punctuation}(.*)\p{General_Category=Close_Punctuation}$/u
      // const RegulaNumerumInitialeEtFinale = /^\p{General_Category=Decimal_Number}([\p{General_Category=Decimal_Number}|\.|~]*)\p{General_Category=Decimal_Number}$/u

      textum = textum.trim()

      const __RegulaCodicemPurum = new RegExp('^' + RegulaCodicemPurum + '$', 'u')
      if (__RegulaCodicemPurum.test(textum)) {
        resultatum.push(`RegulaCodicemPurum ${quod_significationem_in_digitum(textum.match(__RegulaCodicemPurum)[0])}`)
        // resultatum.push(textum.match(RegulaCodicemPurum))
      } else {
        // resultatum.push('RegulaCodicemPurum')
      }

      const __RegulaCodicemPurumInVasum = new RegExp('^' + RegulaCodicemInVasum + '$', 'u')
      if (__RegulaCodicemPurumInVasum.test(textum)) {
        let temp = textum.match(__RegulaCodicemPurumInVasum)
        resultatum.push(`RegulaCodicemInVasum ${quod_significationem_in_digitum(temp[2])} ${temp[1]}`)
        // resultatum.push(temp)
      } else {
        // resultatum.push('Non RegulaCodicemInVasum')
      }

      const __RegulaCodicemPurumInVasumInitiale = new RegExp('^' + RegulaCodicemInVasum + '(.+)$', 'u')
      if (__RegulaCodicemPurumInVasumInitiale.test(textum)) {
        let temp = textum.match(__RegulaCodicemPurumInVasumInitiale)
        resultatum.push(`RegulaCodicemPurumInVasumInitiale ${quod_significationem_in_digitum(temp[2])} ${temp[1]} <<${temp[3].trim()}>>`)
        resultatum.push(temp)
      } else {
        // resultatum.push('Non RegulaCodicemPurumInVasumInitiale')
      }

      const __RegulaCodicemPurumInVasumFinale = new RegExp('^(.+)' + RegulaCodicemInVasum + '$', 'u')
      if (__RegulaCodicemPurumInVasumFinale.test(textum)) {
        let temp = textum.match(__RegulaCodicemPurumInVasumFinale)
        resultatum.push(`RegulaCodicemPurumInVasumFinale ${quod_significationem_in_digitum(temp[3])} ${temp[2]} <<${temp[1].trim()}>>`)
        resultatum.push(temp)
      } else {
        // resultatum.push('Non RegulaCodicemPurumInVasumInitiale')
      }

      // if (RegulaNumerumInitialeEtFinale.test(textum)) {
      //   resultatum.push(`RegulaNumerumInitialeEtFinale`)
      //   resultatum.push(textum.match(RegulaNumerumInitialeEtFinale))
      // } else {
      //   // resultatum.push('NonRegulaNumerumInitialeEtFinale')
      // }

      if (RegulaInitiale.test(textum)) {
        resultatum.push(`RegulaInitiale`)
        resultatum.push(textum.match(RegulaInitiale))
      } else {
        // resultatum.push('NonRegulaInitiale')
      }

      if (RegulaFinale.test(textum)) {
        resultatum.push(`RegulaFinale`)
        resultatum.push(textum.match(RegulaFinale))
      } else {
        // resultatum.push('NonRegulaFinale')
      }

      if (RegulaSystemaScribo.test(textum)) {
        resultatum.push(`RegulaSystemaScribo ${textum.replace(/\P{General_Category=Letter}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaSystemaScribo')
      }

      if (RegulaNumerum.test(textum)) {
        resultatum.push(`RegulaNumerum ${textum.replace(/\P{General_Category=Number}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaNumerum')
      }

      if (RegulaNumerumDigitum.test(textum)) {
        resultatum.push(`RegulaNumerumDigitum ${textum.replace(/\P{General_Category=Decimal_Number}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaNumerumDigitum')
      }

      if (RegulaPunctumInitiale.test(textum)) {
        resultatum.push(`RegulaPunctumInitiale ${textum.replace(/\P{General_Category=Open_Punctuation}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaPunctumInitiale')
      }

      if (RegulaPunctumFinale.test(textum)) {
        resultatum.push(`RegulaPunctumFinale ${textum.replace(/\P{General_Category=Close_Punctuation}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaPunctumFinale')
      }

      if (RegulaSublineam.test(textum)) {
        resultatum.push(`RegulaSublineam ${textum.replace(/\P{General_Category=Connector_Punctuation}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaSublineam')
      }
      if (RegulaHuphen.test(textum)) {
        resultatum.push(`RegulaHuphen ${textum.replace(/\P{General_Category=Dash_Punctuation}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaHuphen')
      }

      if (RegulaExtrapunctum.test(textum)) {
        resultatum.push(`RegulaExtrapunctum ${textum.replace(/\P{General_Category=Other_Punctuation}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaExtrapunctum')
      }

      if (RegulaSymbolum.test(textum)) {
        resultatum.push(`RegulaSymbolum ${textum.replace(/\P{General_Category=Symbol}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaSymbolum')
      }

      if (RegulaMathematicam.test(textum)) {
        resultatum.push(`RegulaMathematicam ${textum.replace(/\P{General_Category=Math_Symbol}/gu, '')}`)
      } else {
        // resultatum.push('NonRegulaMathematicam')
      }

      return resultatum
    }

    /**
     * @deprecated
     **/
    const quod_codicem = (textum) => {
      // @see https://stackoverflow.com/questions/14891129
      //      /regular-expression-pl-and-pn/14891168
      // let removedText = textum.replace(/\D+/g, '');
      let coniunctum = 0
      let codicem_completum = null
      let codicem_cor = textum.replace(/[^0-9_~\.\^\-\[\]\(\)\{\}]/g, '');
      if (codicem_cor.match(/\((.*)\)/)) {
        codicem_cor = codicem_cor.match(/\((.*)\)/).pop()
      }
      if (codicem_cor.match(/\[(.*)\]/)) {
        codicem_cor = codicem_cor.match(/\[(.*)\]/).pop()
      }
      if (codicem_cor.indexOf("~") > -1) {
        let temp = codicem_cor.split("~")
        codicem_cor = temp[0]
        entitatem = parseInt(temp[1])
      } else {
        codicem_completum = codicem_cor
      }

      // @TODO alternative-name--12-34
      // @TODO altrrnative-nane_12-34

      // console.log(textum_cor, textum)
      // @TODO: textum without code parts

      return [codicem_completum, codicem_cor, coniunctum, textum]
    }

    const quod_conceptum = (datum, codicem) => {
      if (datum[codicem]) {
        return datum[codicem]
      }
      return null
    }

    const quod_terminum = (conceptum, objectivum_linguam, agendum_linguam) => {
      // console.log(objectivum_linguam, conceptum[objectivum_linguam])
      if (conceptum[objectivum_linguam] && conceptum[objectivum_linguam]['0']) {
        return conceptum[objectivum_linguam]['0']
      }
      if (agendum_linguam) {
        agendum_linguam.forEach(item => {
          if (conceptum[item] && conceptum[item]['0']) {
            return conceptum[item]['0']
          }
        });
      }
      return null
    }

    const quod_resumens = (fontem, ast_rem) => {
      let resultatum = {
        fontem: fontem,
        objectivum: []
      }
      ast_rem.forEach(item => {
        resultatum.objectivum.push(item.est_textum)
      });

      return resultatum
    }

    /**
     * _[eng-Latn] Main logic [eng-Latn]_
     */
    const main = (datum, clavem_collectionem, objectivum_linguam, agendum_linguam) => {
      // console.log('main', clavem_collectionem)
      datum_globum = datum
      let rem_titulum = clavem_collectionem.shift()
      let rem_linguam = clavem_collectionem.shift()
      let ontologia_crudum = document.querySelector('#ontologia').value
      let radicem_set = new Set()
      let grupum_set = new Set()

      jsyaml.load(ontologia_crudum, function (doc) {
        // console.log('doc', doc)
        datum = doc
      });
      // _[eng-Latn] If you and use JSON, no YAML: [eng-Latn]_
      // datum = JSON.parse(ontologia_crudum)

      // datum = JSON.parse(document.querySelector('#ontologia').value)
      // testum = JSON.parse(document.querySelector('#testum').value)

      const ast = {
        ast: {
          dot: null
        },
        summarium: {
          titulum: rem_titulum,
          linguam: rem_linguam,
          // Lingua Latina: grupum; Anglicum: cluster
          grupum: [],
          radicem: []
        },
        // ast_rem: null,
        resumens: null
      }
      const resultatum = []
      let index = 0
      clavem_collectionem.forEach(item => {
        let est_codicem = null
        let est_codicem_basim = null
        let est_codicem_completum = null
        let est_codicem_grupum = 0
        let est_conceptum = null
        let est_terminum = null
        let est_textum = null
        let est_radicem = -1
        let est_grupum = 0
        est_codicem = quod_codicem(item)
        // console.log('est_codicem', est_codicem)
        if (est_codicem && est_codicem[0]) {
          est_codicem_basim = est_codicem[0]
          est_radicem = parseInt(est_codicem[0].split('.')[0])
          est_codicem_completum = est_codicem[1]
          est_codicem_grupum = est_codicem[2]
          est_conceptum = quod_conceptum(datum, est_codicem_basim)
        }
        if (est_conceptum) {
          est_terminum = quod_terminum(est_conceptum, objectivum_linguam, agendum_linguam)
        }
        if (est_terminum) {
          est_textum = '[' + est_codicem_completum + '] ' + est_terminum
        } else {
          est_textum = '//?' + item + '?//'
        }

        radicem_set.add(est_radicem)
        grupum_set.add(est_grupum)

        // console.log(item, est_conceptum, est_terminum)
        resultatum.push(
          {
            'index': index,
            'crudum': item,
            'radicem': est_radicem,
            'est_codicem_completum': est_codicem_completum,
            'grupum': est_codicem_grupum,
            'est_conceptum': est_conceptum,
            'est_terminum': est_terminum,
            'est_textum': est_textum,
            // '__': est_codicem,
          }
        )
        index = index + 1
      });

      let clavem_collectionem_purum = clavem_collectionem.map(function (clavem) {
        let temp = quod_codicem(clavem)
        return temp[0] || ''
      })

      ast.summarium.grupum = Array.from(grupum_set).sort()
      ast.summarium.radicem = Array.from(radicem_set).sort()
      ast.collectionem = resultatum
      ast.resumens = quod_resumens(clavem_collectionem, ast.collectionem)
      ast.ast.numerum = abstractum_syntaxim_arborem(clavem_collectionem_purum)
      ast.ast.dot = ast_in_dot_numerae(ast.ast.numerum, rem_titulum + ',' + rem_linguam)
      return ast
    }

  </script>

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/codejar@3.5.0/codejar.min.js"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/codemirror.min.js"
    integrity="sha512-4DlmQ+aBOfYTZ3uzRKCDXdyL7y8IlopnVChhXG0pRFgyvhwONVQW3JX8e5DYoXUNr3evQpLZz7S3O1XxMH4WKA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/mathematica/mathematica.min.js"
    integrity="sha512-rbukTh0nNllkRjO8PgdzZSWxeeG4msxoTnrIxt5kUnI1uayl6+sUxoItSZiC6/pQto44VJVc7HQ+WYzOesb1kw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/javascript/javascript.min.js" integrity="sha512-DJ/Flq7rxJDDhgkO49H/rmidX44jmxWot/ku3c+XXEF9XFal78KIpu7w6jEaQhK4jli1U3/yOH+Rp3cIIEYFPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.64.0/mode/yaml/yaml.min.js"
    integrity="sha512-+aXDZ93WyextRiAZpsRuJyiAZ38ztttUyO/H3FZx4gOAOv4/k9C6Um1CvHVtaowHZ2h7kH0d+orWvdBLPVwb4g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"
    integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    /**
     * @see https://stackoverflow.com/questions/1293147/example-javascript-code-to-parse-csv-data/14991797#14991797
     **/
    function parseCSV(str) {
      var arr = [];
      var quote = false;  // 'true' means we're inside a quoted field

      // Iterate over each character, keep track of current row and column (of the returned array)
      for (var row = 0, col = 0, c = 0; c < str.length; c++) {
        var cc = str[c], nc = str[c + 1];        // Current character, next character
        arr[row] = arr[row] || [];             // Create a new row if necessary
        arr[row][col] = arr[row][col] || '';   // Create a new column (start with empty string) if necessary

        // If the current character is a quotation mark, and we're inside a
        // quoted field, and the next character is also a quotation mark,
        // add a quotation mark to the current column and skip the next character
        if (cc == '"' && quote && nc == '"') { arr[row][col] += cc; ++c; continue; }

        // If it's just one quotation mark, begin/end quoted field
        if (cc == '"') { quote = !quote; continue; }

        // If it's a comma and we're not in a quoted field, move on to the next column
        if (cc == ',' && !quote) { ++col; continue; }

        // If it's a newline (CRLF) and we're not in a quoted field, skip the next character
        // and move on to the next row and move to column 0 of that new row
        if (cc == '\r' && nc == '\n' && !quote) { ++row; col = 0; ++c; continue; }

        // If it's a newline (LF or CR) and we're not in a quoted field,
        // move on to the next row and move to column 0 of that new row
        if (cc == '\n' && !quote) { ++row; col = 0; continue; }
        if (cc == '\r' && !quote) { ++row; col = 0; continue; }

        // Otherwise, append the current character to the current column
        arr[row][col] += cc;
      }
      return arr;
    }
  </script>

  <script>
    //********* _[eng-Latn] User interface logic, START [eng-Latn]_ **********//
    // TODO: implement any basic raibow only for testcases https://packagecontrol.io/packages/rainbow_csv

    // var myCodeMirror = CodeMirror(document.body);
    var CoreMirrorOntologia = CodeMirror.fromTextArea(document.querySelector('#ontologia'));
    var CoreMirrorTestum = CodeMirror.fromTextArea(document.querySelector('#testum'));
    var CoreMirrorTestumDot = CodeMirror.fromTextArea(document.querySelector('#testum_dot'));
    // var CoreMirrorTestum2 = CodeMirror.fromTextArea(document.querySelector('#testum2'));

    CoreMirrorOntologia.setOption('lineNumbers', true)
    CoreMirrorOntologia.setOption('theme', 'dracula')
    CoreMirrorOntologia.setOption('mode', 'yaml')
    CoreMirrorOntologia.setOption('lineWrapping', true)
    CoreMirrorTestum.setOption('lineNumbers', true)
    CoreMirrorTestum.setOption('viewportMargin', true)
    // CoreMirrorTestum2.setOption('lineNumbers', true)
    // CoreMirrorTestum.setOption('mode', 'mathematica')
    CoreMirrorTestum.setOption('mode', 'text')
    CoreMirrorTestumDot.setOption('mode', 'text')
    CoreMirrorTestumDot.setOption('viewportMargin', true)
    CoreMirrorTestumDot.setOption('lineNumbers', true)
    // CoreMirrorTestumDot.setOption('readOnly', true)
  </script>
  <script>
    const ui_actionem = document.querySelector('#actionem')
    const ui_objectivum_linguam = document.querySelector('#objectivum_linguam')
    const ui_agendum_linguam = document.querySelector('#agendum_linguam')
    const ui_testum_dot = document.querySelector('#testum_dot')
    const ui_ontologia_yml = document.querySelector('#ontologia-archivum-yml')
    const ui_ontologia_json = document.querySelector('#ontologia-archivum-json')
    const ui_testum_csv = document.querySelector('#testum-archivum-csv')
    const ui_testum_ast_dot = document.querySelector('#testum-ast-archivum-dot')
    const ui_testum_ast_dot_online = document.querySelector('#testum-ast-online-dot')
    let actionem_index = 1
    // const ui_testum = document.querySelector('#testum')
    let testum_collectionem = []
    // let abstractum_syntaxim_arborem = null
    let datum_temp = null

    try {
      // const doc = jsyaml.load(CoreMirrorOntologia.getValue(), 'utf8');
      datum_temp = jsyaml.load(CoreMirrorOntologia.getValue(), 'utf8');
      // console.log(datum_temp);
    } catch (e) {
      console.log(e);
    }


    actionem.addEventListener("click", function (el) {
      // console.log('click', el)
      // console.log('ui_testum', ui_testum, parseCSV(ui_testum.value))
      console.group(`āctiōnem ${actionem_index}`);

      // testum_collectionem = parseCSV(ui_testum.value)
      // testum_colloctionem = parseCSV(document.querySelector('#testum').value)
      testum_collectionem = parseCSV(CoreMirrorTestum.getValue())
      adhoc_objectivum_linguam = ui_objectivum_linguam.value
      adhoc_agendum_linguam = ui_objectivum_linguam.value.split(',')

      // jsyaml.load(CoreMirrorOntologia.getValue(), function (doc) {
      //   console.log('oi')
      //   datum_temp = doc
      // });
      try {
        // const doc = jsyaml.load(CoreMirrorOntologia.getValue(), 'utf8');
        datum_temp = jsyaml.load(CoreMirrorOntologia.getValue(), 'utf8');
        // console.log(datum_temp);
      } catch (e) {
        console.log(e);
      }
      let testum_index = 1
      testum_collectionem.forEach(item => {
        console.group(`Testum ${testum_index}`);
        // console.log('loop', item)

        resultatum_main = main(datum_temp, item, adhoc_objectivum_linguam, adhoc_agendum_linguam)
        // console.log(abstractum_syntaxim_arborem)
        // console.log(abstractum_syntaxim_arborem)
        console.log(resultatum_main.resumens.fontem)
        console.log(resultatum_main.resumens.objectivum)
        console.log(resultatum_main)
        CoreMirrorTestumDot.setValue(resultatum_main.ast.dot)

        // CoreMirrorTestumDot.setValue(ast_in_dot_numerae(abstractum_syntaxim_arborem(['12.10.34', '12.10.34~2', '', '14.56', '14.56', '14.56~2']), 'ast'))

        console.groupEnd(`Testum ${testum_index}`);
        testum_index = testum_index + 1
      });
      console.groupEnd(`āctiōnem ${actionem_index}`);
      actionem_index = actionem_index + 1
    });

    // Uses https://github.com/eligrey/FileSaver.js
    ui_ontologia_yml.addEventListener("click", function (el) {
      var blob = new Blob([CoreMirrorOntologia.getValue()], { type: "text/x-yaml;charset=utf-8" });
      saveAs(blob, "ontologia.yml");
    });
    ui_ontologia_json.addEventListener("click", function (el) {
      try {
        datum_temp = jsyaml.load(CoreMirrorOntologia.getValue(), 'utf8');
      } catch (e) {
        console.log(e)
        alert(e);
      }
      var blob = new Blob([JSON.stringify(datum_temp, null, 2)], { type: "application/jsonl;charset=utf-8" });
      saveAs(blob, "ontologia.json");
    });
    ui_testum_csv.addEventListener("click", function (el) {
      var blob = new Blob([CoreMirrorTestum.getValue()], { type: "text/csv;charset=utf-8" });
      saveAs(blob, "testum.csv");
    });
    ui_testum_ast_dot.addEventListener("click", function (el) {
      var blob = new Blob([CoreMirrorTestumDot.getValue()], { type: "vnd.graphviz;charset=utf-8" });
      saveAs(blob, "testum-ast.gv");
    });
    ui_testum_ast_dot_online.addEventListener("click", function (el) {
      // this.href = 'https://dreampuf.github.io/GraphvizOnline/#' + encodeURI(CoreMirrorTestumDot.getValue())
      this.href = 'https://edotor.net/?engine=dot#' + encodeURI(CoreMirrorTestumDot.getValue())
      // console.log('oi', el, this)

      // var blob = new Blob([CoreMirrorTestumDot.getValue()], { type: "vnd.graphviz;charset=utf-8" });
      // saveAs(blob, "testum-ast.gv");
      return false;
    });


    //*********** _[eng-Latn] User interface logic, END [eng-Latn]_ **********//
  </script>
</body>

</html>
