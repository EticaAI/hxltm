<!doctype html>
<html class="no-js" lang="la">

<head>
  <meta charset="utf-8">
  <title>cōdex simplex ontologiae</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
</head>

<!--
  @see
  - https://github.com/HXL-CPLP/forum/issues/60
  - https://github.com/SEMICeu/Core-Person-Vocabulary/issues/39

-->

<body>
  <p>cōdex simplex ontologiae Ad console.log</p>
  <script>
    /****** _[eng-Latn] Edit this section [eng-Latn]_ ******/
    const debug = false
    const datum = {
      "12": {
        "eng-Latn": {
          "0": "Person"
        },
        "prs-Arab": {
          "0": "//شخص//"
        },
        "qhx-Latn": {
          "0": "#item+personam"
        }
      },
      "12.10": {
        "eng-Latn": {
          "0": "Person - //Any type of person name//"
        },
        "prs-Arab": {
          "0": "//شخص// - //هر نوع نام شخصی//"
        },
        "qhx-Latn": {
          "0": "#item+personam+nomen+co_12_10"
        }
      },
      "12.10.34": {
        "eng-Latn": {
          "0": "Person - alternative name"
        },
        "prs-Arab": {
          "0": "//شخص// - //نام جایگزین//"
        },
        "qhx-Latn": {
          "0": "#item+personam+nomen+co_12_10_34"
        }
      },
      "12.10.34.5.99": {
        "eng-Latn": {
          "0": "Person - nickname from workplace"
        },
        "prs-Arab": {
          "0": "//شخص// - //نام مستعار از محل کار//"
        }
      },
      "14": {
        "eng-Latn": {
          "0": "Legal Entity"
        },
        "prs-Arab": {
          "0": "//نهاد قانونی//"
        }
      },
      "14.56": {
        "eng-Latn": {
          "0": "Legal Entity - alternative name"
        },
        "prs-Arab": {
          "0": "//نهاد قانونی// - //نام جایگزین//"
        }
      }
    }

    const testum = {
      "1": [
        '12.10.34',
        '12.10.34~2',
        '14.56',
        '14.56~2',
      ],
      "2": [
        'Attacker name [12.34~1]',
        'Survivor name [12.34~2]',
        'Company name [14.56~2]',
      ],
      "3": [
        '//نام مهاجم// [12.34~1]',
        '//نام بازمانده// [12.34~2]',
        '//نام شرکت// [14.56~2]',
      ]
    }
    /****** _[eng-Latn] Edit this section [eng-Latn]_ ******/

    // @TODO: too simplistic. Need deal with more cases
    const quod_codicem = (textum) => {
      // let removedText = textum.replace(/\D+/g, '');
      // let removedText = textum.replace(/\w+/g, '');
      let removedText = textum.replace(/[a-zA-z]/g, '');
      console.log(textum, removedText)
      return [textum, textum]
    }

    const quod_conceptum = (datum, codicem) => {
      if (datum[codicem]) {
        return datum[codicem]
      }
      return null
    }

    const quod_terminum = (conceptum, objectivum_linguam, agendum_linguam) => {
      // console.log(objectivum_linguam, conceptum[objectivum_linguam])
      if (conceptum[objectivum_linguam] && conceptum[objectivum_linguam]['0']) {
        return conceptum[objectivum_linguam]['0']
      }
      return null
    }

    const main = (clavem_collectionem, objectivum_linguam, agendum_linguam) => {
      const resultatum = []
      let index = 0
      clavem_collectionem.forEach(item => {
        let est_codicem = null
        let est_codicem_basim = null
        let est_codicem_completum = null
        let est_conceptum = null
        let est_terminum = null
        let est_textum = null
        est_codicem = quod_codicem(item)
        if (est_codicem) {
          est_codicem_basim = est_codicem[0]
          est_codicem_completum = est_codicem[1]
          est_conceptum = quod_conceptum(datum, est_codicem_basim)
        }
        if (est_conceptum) {
          est_terminum = quod_terminum(est_conceptum, objectivum_linguam, agendum_linguam)
        }
        if (est_terminum) {
          est_textum = '[' + est_codicem_completum + '] ' + est_terminum
        } else {
          est_textum = '//?' + item + '?//'
        }

        // console.log(item, est_conceptum, est_terminum)
        resultatum.push(
          {
            'index': index,
            'crudum': item,
            'est_codicem_completum': est_codicem_completum,
            'est_conceptum': est_conceptum,
            'est_terminum': est_terminum,
            'est_textum': est_textum,
          }
        )
        index = index + 1
      });
      return resultatum
    }

    // console.log(datum)
    // console.log(testum)
    console.log(main(testum["1"], 'eng-Latn', ['prs-Arab']))
    console.log(main(testum["2"], 'eng-Latn', ['prs-Arab']))
    console.log(main(testum["3"], 'eng-Latn', ['prs-Arab']))
    // main(testum["2"], 'eng-Latn')
  </script>
</body>

</html>
